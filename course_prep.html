<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>course_prep.knit</title>

<script src="site_libs/header-attrs-2.19/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="chapters.html">Chapters</a>
</li>
<li>
  <a href="datacode.html">Data &amp; Code</a>
</li>
<li>
  <a href="news.html">News</a>
</li>
<li>
  <a href="errata.html">Errata</a>
</li>
<li>
  <a href="courses.html">Course Material</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.collapsible {
  background-color: #777;
  color: white;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.active, .collapsible:hover {
  background-color: #555;
}

.content {
  padding: 0 18px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
  background-color: #f1f1f1;
  color: black;
}

<style>
a:link {
  color: blue;
  background-color: transparent;
  text-decoration: none;
}
a:visited {
  color: blue;
  background-color: transparent;
  text-decoration: none;
}
a:hover {
  color: red;
  background-color: transparent;
  text-decoration: underline;
}
a:active {
  color: red;
  background-color: transparent;
  text-decoration: underline;
}
</style>

</style>
<title>
Material for the Manchester course 2023
</title>
<div
id="the-ncrm-summer-school-in-manchester-july-11-14-2023-funded-by-esrc"
class="section level2">
<h2>The NCRM Summer School in Manchester July 11-14, 2023 (funded by
ESRC)</h2>
<p><br /> <br /></p>
<div id="the-full-set-of-material-for-this-course"
class="section level3">
<h3>The full set of material for this course</h3>
<ul>
<li>
<button type="button" class="btn btn-primary">
<a href="data/courses/Man2023/lectures_1to5.zip">Notes for lectures 1 to
5</a>
</button>
</li>
<li>
<button type="button" class="btn btn-primary">
<a href="data/courses/Man2023/lectures_6to7.zip">Notes for lectures 6 to
7</a>
</button>
</li>
<li>
<button type="button" class="btn btn-primary">
<a href="data/courses/Man2023/practicals.zip">Practicals 1 to 7</a>
</button>
</li>
</ul>
<p><br /></p>
</div>
<div
id="keywords-of-the-course-answers-from-a-quick-fire-round-of-questions-on-the-four-main-topics-after-the-course"
class="section level3">
<h3>Keywords of the course (answers from a quick-fire round of questions
on the four main topics after the course)</h3>
<button class="collapsible">
<ul>
<li>spatial and spatial temporal data analysis
</button>
<div class="content">
<ul>
<li>
spatial and temporal random effects
</li>
<li>
Bayesian hierarchical modelling
</li>
<li>
spill-over effects
</li>
<li>
spatial econometrics
</li>
<li>
autocorrelation
</li>
<li>
adjacency
</li>
<li>
separable and inseparable space-time frameworks
</li>
<li>
ICAR
</li>
<li>
BYM
</li>
<li>
RW1
</li>
<li>
linear trend
</li>
<li>
maps
</li>
<li>
the W matrix
</li>
</ul>
</div>
<br /></li>
</ul>
<button class="collapsible">
<ul>
<li>The hierarchical modelling structure
</button>
<div class="content">
<ul>
<li>
data
</li>
<li>
process
</li>
<li>
parameter
</li>
</ul>
</div>
<br /></li>
</ul>
<button class="collapsible">
<ul>
<li>Bayesian inference
</button>
<div class="content">
<ul>
<li>
uncertainty
</li>
<li>
probability distribution
</li>
<li>
likelihood
</li>
<li>
prior
</li>
<li>
posterior
</li>
<li>
MCMC sampling
</li>
<li>
flexibility
</li>
<li>
probability outputs
</li>
</ul>
</div>
<br /></li>
</ul>
<button class="collapsible">
<ul>
<li>WinBUGS
</button>
<div class="content">
<ul>
<li>
fat hairy caterpillar
</li>
<li>
convergence
</li>
<li>
BGR
</li>
<li>
history plot
</li>
<li>
efficiency (MC error)
</li>
<li>
a long list of steps to run a model
</li>
<li>
iteration
</li>
<li>
burn-in
</li>
<li>
MCMC chains
</li>
<li>
initial values
</li>
</ul>
</div></li>
</ul>
<p><br /> ### Preparatory material <br /></p>
<p>
Below is a set of material to prepare your laptop and yourself prior to
attending the NCRM Summer school in Manchester July 11-14, 2023. If you
have any problems, please contact Philip at <a
href="mailto:guangquan.li@northumbria.ac.uk"
class="email">guangquan.li@northumbria.ac.uk</a>. We look forward to
meeting everyone in Manchester soon.
</p>
<p><br /></p>
</div>
<div id="installing-r-rstudio-and-winbugs" class="section level3">
<h3>1. Installing R, RStudio and WinBUGS</h3>
<button class="collapsible">
<ul>
<li>Installing R
</button>
<div class="content">
<p>
Both R and RStudio need to be installed to correctly run RStudio. R can
be considered as the programming language being used, whilst RStudio is
a more user-friendly platform for coding. R can be installed from <a
href="https://r-project.org">www.r-project.org</a>, by clicking the
‘download R’ link, you can then select either of the UK CRAN mirrors
(University of Bristol or Imperial College London).
</p></li>
</ul>
<p>
You must then select the operating system you are using, i.e. Windows,
macOS, by clicking ‘Download R for XX’ where XX is your chosen system.
You can then select the version of R you want to install. For Windows
users, please download the base version. For macOS users, please install
the R version depending on your processor (M1/M2/intel).
</p>
</div>
<button class="collapsible">
<ul>
<li>Installing RStudio
</button>
<div class="content">
<p>
RStudio can be installed from <a
href="https://posit.co/products/open-source/rstudio">www.posit.co/products/open-source/rstudio</a>,
and by clicking ‘Download RStudio’ in the top right corner. Then, after
making sure the ‘RStudio Desktop’ tab is highlighted, click the download
button inside the RStudio Desktop (Free) box.
</p></li>
</ul>
<p>
From this page you can scroll down to find the correct version for the
operating system you are using, and click to download RStudio.
</p>
<p>
If you have not use R/RStudio before, <a
href="https://mathcenter.oxford.emory.edu/site/math117/firstUseOfRStudio/">this
one-page introduction</a> will help to start your R journey.
</p>
</div>
<button class="collapsible">
<ul>
<li>Installing packages in R
</button>
<div class="content">
<p>
Throughout the course, we will be using a number of packages in R to
carry out specific analyses. We can use the
<code>install.packages</code> function to install a package. So by
running the code <code>install.packages(‘maptools’)</code> in R, we
install the <code>maptools</code> package which we will use for
manipulating a shapefile, a digital version of a map. We would like you
to install the following packages:
</p>
<ul>
<li>
<code>maptools</code>
<li>
<code>R2WinBUGS</code> (note: R is case sensitive)
<li>
<code>spdep</code>
<li>
<code>RColorBrewer</code>
</ul></li>
</ul>
<p>
In the future, when running a set of code, if R returns an error message
saying a package is not found, you can use the
<code>install.packages</code> function to install it (then run the code
again).
</p>
</div>
<button class="collapsible">
<ul>
<li>Installing WinBUGS
</button>
<div class="content">
<p>
For macOS and Linux users: please contact <a
href="mailto:guangquan.li@northumbria.ac.uk"
class="email">guangquan.li@northumbria.ac.uk</a> for installation
detail.
</p></li>
</ul>
<p>
For Windows users: WinBUGS can be installed from <a
href="https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-winbugs/">www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-winbugs/</a>.
A .zip file can be downloaded by clicking the ‘Download WinBUGS’ link.
Unzip the downloaded file WinBUGS14.zip and you will have a new folder
called <code>winbugs14_full_patched</code>. Within that folder, go to
<code>WinBUGS14/WinBUGS14.exe</code>. Double click on that file will
start the program.
</p>
<p>
Throughout the course, we will learn how to use WinBUGS to fit Bayesian
spatial and spatial-temporal models.
</p>
</div>
<p><br /></p>
</div>
<div id="on-mapping" class="section level3">
<h3>2. On mapping</h3>
<button class="collapsible">
<ul>
<li>Creating a geodatabase in R
</button>
<div class="content">
<p>
Mapping is an important aspect in the analysis of spatial and
spatial-temporal data. Before we can create a map of some spatial data,
we need to create a geodatabase that contains the digital version of the
geographic features (e.g. points and polygons) and the data values
associated with the features.
</p></li>
</ul>
<p>
Appendix 4.13.1 in our book illustrates the steps involved in creating
such a database in R using a toy example. <a
href="data/courses/Man2023/geodatabase.zip">Click here to download the
contents</a> then follow the example. We will use these steps again in
the course when analysing new datasets.
</p>
<p>
<b>For mac users</b>: on p. 108, instead of creating the folder on the
<code>C</code> drive, you create the folder with the name
<code>sptmbook</code> on your Desktop. Then on Line 1 in the textbox on
p. 108, instead of <code>setwd(‘c:/sptmbook/’)</code>, you type
<code>setwd(‘~/Desktop/sptmbook/’)</code> with a capital D in Desktop.
Everything else follows. Hereafter, if you see any reference to the C
drive (e.g. <code>C:/sptmbook/</code>), use
<code>~/Desktop/sptmbook/</code> instead.
</div>
<button class="collapsible">
<ul>
<li>Producing a choropleth map in R
</button>
<div class="content">
<p>
A choropleth map uses different colours (or different shades of a
colour) to represent the values associated with the geographic features
(points or areas). Section 6.2.1 in our book guides you through the
steps to create a choropleth map in R.
</p></li>
</ul>
<p>
<a href="data/courses/Man2023/mapping.zip">Download the material
here</a> (a zip file called <code>mapping.zip</code>) and move the zip
file to the folder <code>C:/sptmbook/</code> (or
<code>~/Desktop/sptmbook/</code> for mac users) the one that you created
for the exercise on creating a geodatabase (complete the exercise on
Creating a geodatabase in R now if you have not done so). Unzip the file
and you will have a folder called <code>mapping</code>. Unzip the file
<code>cambridgeship.zip</code> in the folder <code>mapping</code>.
Follow the instructions in the pdf file <code>mapping.pdf</code>. Prior
to running the R code in the textbox on p. 162, set your working
directory by entering the following line in R
<code>setwd(‘c:/sptmbook/mapping/cambridgeshire’)</code>. You are now
ready to run through the steps in the pdf.
</p>
</div>
<p><br /></p>
</div>
<div id="on-creating-the-weights-matrix-accessing-data-from-a-shapefile"
class="section level3">
<h3>3. On creating the weights matrix + accessing data from a
shapefile</h3>
<button class="collapsible">
<ul>
<li>Creating the weights matrix
</button>
<div class="content">
<p>
The spatial weights matrix (also known as the W matrix), as we shall
discuss in the course, is an important element in modelling spatial and
space-time data. We construct the W matrix to quantify the spatial
relationships amongst a set of areas (or points) within the study
region.
</p></li>
</ul>
<p>
This set of material (<a
href="data/courses/Man2023/weights_matrix.zip">click here to
download</a>) shows how to construct a W matrix based on contiguity.
First read through the pdf file called <code>weights_matrix.pdf</code>)
to understand what a weights matrix is and what contiguity means then go
through Appendix 4.13.2 (in the pdf file called
<code>construct_w_matrix.pdf</code>) to construct a weights matrix based
on the shapefile you constructed under the Creating a geodatabase in R
task (see Point 2 above).
</p>
</div>
<button class="collapsible">
<ul>
<li>Extracting data from a shapefile
</button>
<div class="content">
<p>
p. 112-113 in Appendix 4.13.2 (in <code>construct_w_matrix.pdf</code>
above) shows how to extract relevant data from a shapefile for mapping
and/or analysis. You would also have done this in the mapping exercise.
</p></li>
</ul>
</div>
<p><br /></p>
<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    } 
  });
}
</script>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
